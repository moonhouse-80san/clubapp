<style>
.ca-wrap { padding: 24px; max-width: 860px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
.ca-page-title { font-size: 22px; font-weight: 700; color: #1a1a2e; margin-bottom: 6px; }
.ca-page-sub   { font-size: 14px; color: #888; margin-bottom: 28px; }

.ca-section-title {
    font-size: 16px; font-weight: 700; color: #333;
    margin: 0 0 10px;
    padding-bottom: 10px;
    border-bottom: 2px solid #e8eaf0;
    display: flex; align-items: center; gap: 8px;
}

.ca-inst-table {
    width: 100%; border-collapse: collapse;
    font-size: 13px;
    margin-bottom: 8px;
    border: 1px solid #dde1ec;
}
.ca-inst-table th {
    background: #f5f6fa;
    padding: 9px 12px;
    text-align: left;
    font-weight: 600;
    color: #555;
    border: 1px solid #dde1ec;
    white-space: nowrap;
}
.ca-inst-table td {
    padding: 10px 12px;
    border: 1px solid #eef0f6;
    color: #444;
    vertical-align: middle;
}
.ca-inst-table tbody tr:hover { background: #f8f9ff; }
.ca-inst-no   { text-align: center; color: #888; }
.ca-inst-mid  { font-family: monospace; font-size: 13px; color: #1565C0; font-weight: 600; }
.ca-inst-date { font-size: 12px; color: #888; white-space: nowrap; }
.ca-inst-badge {
    display: inline-block;
    padding: 2px 8px;
    background: #e3f2fd;
    color: #1565C0;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
}
.ca-inst-title-link { color: #333; text-decoration: none; }
.ca-inst-title-link:hover { color: #2196F3; text-decoration: underline; }
.ca-inst-gear {
    font-size: 18px;
    color: #666;
    cursor: pointer;
    transition: color .15s;
}
.ca-inst-gear:hover { color: #2196F3; }
.ca-inst-actions {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    margin-top: 8px;
    margin-bottom: 36px;
}
.ca-btn {
    padding: 7px 18px;
    background: #fff;
    border: 1px solid #bbb;
    border-radius: 4px;
    font-size: 13px;
    color: #333;
    cursor: pointer;
    display: inline-flex; align-items: center;
    text-decoration: none;
}
.ca-btn:hover { background: #f5f6fa; }
.ca-btn.danger:hover { background: #fff0f0; border-color: #e53935; color: #e53935; }

.ca-reg-card {
    background: #f8f9ff;
    border: 1.5px solid #e8eaf0;
    border-radius: 12px;
    padding: 22px 24px;
    margin-bottom: 24px;
}
.ca-reg-row {
    display: flex; align-items: center; gap: 12px;
    margin-bottom: 14px;
}
.ca-reg-row:last-child { margin-bottom: 0; }
.ca-reg-label { width: 120px; font-size: 14px; font-weight: 600; color: #555; flex-shrink: 0; }
.ca-reg-input {
    flex: 1; max-width: 280px;
    padding: 9px 13px;
    border: 1.5px solid #dde1ec;
    border-radius: 8px;
    font-size: 14px;
    background: #fff;
}
.ca-reg-input:focus { outline: none; border-color: #2196F3; box-shadow: 0 0 0 3px rgba(33,150,243,.1); }
.ca-reg-hint { font-size: 12px; color: #aaa; }
.ca-reg-submit {
    padding: 9px 24px;
    background: linear-gradient(135deg,#2196F3,#1565C0);
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: all .2s;
}
.ca-reg-submit:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(33,150,243,.3); }

.ca-footer {
    margin-top: 24px; padding: 14px 18px;
    background: #f5f6fa; border-radius: 10px;
    font-size: 13px; color: #888;
    display: flex; gap: 24px; flex-wrap: wrap;
}
</style>

<div class="ca-wrap">

    <div class="ca-page-title">ğŸ“ í´ëŸ½ ì•± ê´€ë¦¬ì</div>
    <div class="ca-page-sub">ëª¨ë“ˆ ì£¼ì†Œ(mid) ë“±ë¡ ë° ê´€ë¦¬</div>

    <div class="ca-section-title">ğŸŒ ëª¨ë“ˆ ì£¼ì†Œ (ì¸ìŠ¤í„´ìŠ¤) ëª©ë¡</div>

    <div style="margin-bottom:10px; font-size:13px; color:#888;">
        Total: <strong>{$module_instance_count}</strong>, Page: 1/1
    </div>

    <form id="ca-del-form" action="./" method="post">
        <input type="hidden" name="module" value="clubapp" />
        <input type="hidden" name="act"    value="procClubappAdminDeleteInstance" />
        <input type="hidden" name="_rx_csrf_token" value="{$_rx_csrf_token}" />

        <table class="ca-inst-table">
            <thead>
                <tr>
                    <th style="width:46px; text-align:center;">ë²ˆí˜¸</th>
                    <th style="width:90px;">ëª¨ë“ˆ ë¶„ë¥˜</th>
                    <th style="width:100px;">ëª¨ë“ˆ ì´ë¦„</th>
                    <th>ë¸Œë¼ìš°ì € ì œëª©</th>
                    <th style="width:155px;">ë“±ë¡ì¼</th>
                    <th style="width:155px;">íƒ€ì„ë¼ì¸ ìˆ˜ì •ì¼</th>
                    <th style="width:46px; text-align:center;">ì„¤ì •</th>
                    <th style="width:36px; text-align:center;">
                        <input type="checkbox" id="ca-check-all"
                               onclick="document.querySelectorAll('.ca-inst-chk').forEach(function(c){c.checked=this.checked;}.bind(this))" />
                    </th>
                </tr>
            </thead>
            <tbody>
            <!--@if($module_instances && count($module_instances) > 0)-->
                <!--@foreach($module_instances as $inst)-->
                <tr>
                    <td class="ca-inst-no">{$inst->no}</td>
                    <td><span class="ca-inst-badge">1-board</span></td>
                    <td class="ca-inst-mid">{$inst->mid}</td>
                    <td>
                        <a href="{getUrl('','mid',$inst->mid)}" target="_blank" class="ca-inst-title-link">
                            {$inst->display_title}
                        </a>
                    </td>
                    <td class="ca-inst-date">{$inst->regdate_fmt}</td>
                    <td class="ca-inst-date">{$inst->last_update_fmt}</td>
                    <td style="text-align:center;">
                        <span class="ca-inst-gear" title="ìˆ˜ì •"
                              data-mid="{$inst->mid}"
                              data-title="{$inst->title_esc}"
                              data-srl="{$inst->module_srl}"
                              onclick="caFillForm(this)">âš™</span>
                    </td>
                    <td style="text-align:center;">
                        <input type="checkbox" name="module_srl[]" value="{$inst->module_srl}" class="ca-inst-chk" />
                    </td>
                </tr>
                <!--@end-->
            <!--@else-->
                <tr>
                    <td colspan="8" style="text-align:center; padding:30px; color:#bbb;">
                        ë“±ë¡ëœ ëª¨ë“ˆ ì£¼ì†Œê°€ ì—†ìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œ ë“±ë¡í•´ ì£¼ì„¸ìš”.
                    </td>
                </tr>
            <!--@end-->
            </tbody>
        </table>

        <div class="ca-inst-actions">
            <button type="button" class="ca-btn"
                    onclick="document.getElementById('ca-reg-section').scrollIntoView({literal}{behavior:'smooth'}{/literal})">ë“±ë¡</button>
            <button type="submit" class="ca-btn danger"
                    onclick="return confirm('ì„ íƒí•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</button>
        </div>
    </form>

    <div class="ca-section-title" id="ca-reg-section">ğŸ“ ëª¨ë“ˆ ì£¼ì†Œ ë“±ë¡ / ìˆ˜ì •</div>

    <div class="ca-reg-card">
        <form action="./" method="post">
            <input type="hidden" name="module" value="clubapp" />
            <input type="hidden" name="act"    value="procClubappAdminSaveInstance" />
            <input type="hidden" name="_rx_csrf_token" value="{$_rx_csrf_token}" />
            <input type="hidden" name="module_srl" id="ca-reg-srl" value="" />

            <div class="ca-reg-row">
                <label class="ca-reg-label" for="ca-reg-mid">ëª¨ë“ˆ ì£¼ì†Œ (mid)</label>
                <input type="text" id="ca-reg-mid" name="module_mid" class="ca-reg-input"
                       placeholder="ì˜ˆ) clubapp" pattern="[a-zA-Z0-9_]+" maxlength="50" required />
                <span class="ca-reg-hint">ì˜ë¬¸Â·ìˆ«ìÂ·_ ë§Œ ì‚¬ìš©</span>
            </div>

            <div class="ca-reg-row">
                <label class="ca-reg-label" for="ca-reg-title">ë¸Œë¼ìš°ì € ì œëª©</label>
                <input type="text" id="ca-reg-title" name="module_title" class="ca-reg-input"
                       placeholder="ì˜ˆ) í´ëŸ½ ì•±" maxlength="100" />
            </div>

            <div class="ca-reg-row">
                <div class="ca-reg-label"></div>
                <button type="submit" class="ca-reg-submit">ğŸ’¾ ì €ì¥</button>
                <button type="button" class="ca-btn" style="margin-left:8px;"
                        onclick="this.closest('form').reset(); document.getElementById('ca-reg-srl').value='';">ì´ˆê¸°í™”</button>
            </div>
        </form>
    </div>

    <div class="ca-footer">
        <span>ğŸ“¦ clubapp v1.0.0</span>
        <span>ğŸ“… 2026-02-18</span>
        <span>ğŸ‘¤ 80san</span>
    </div>

</div>

<script>
function caFillForm(el) {
    document.getElementById('ca-reg-mid').value   = el.dataset.mid;
    document.getElementById('ca-reg-title').value = el.dataset.title;
    document.getElementById('ca-reg-srl').value   = el.dataset.srl;
    document.getElementById('ca-reg-section').scrollIntoView({behavior: 'smooth'});
}
</script>